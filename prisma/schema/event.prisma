model Event {
  id                  String      @id @default(uuid())
  host                User        @relation(fields: [hostId], references: [id])
  hostId              String  
  name                String
  eventType           EventType
  dateTime            DateTime
  location            String
  minParticipants     Int 
  maxParticipants     Int
  currentParticipants Int         @default(0)
  image               String
  joiningFee          Int         @default(0)
  status              EventStatus @default(OPEN)
  isApproved          Boolean     @default(true)
  isFeatured          Boolean     @default(false)
  createdAt           DateTime    @default(now())
  updatedAt           DateTime    @updatedAt

  review            Review[]
  eventParticipants EventParticipants[]
  saveEvent         SaveEvent[]
  payment Payment[]
}

model Payment {
  id            String        @id @default(uuid())
  amount        Float
  paymentStatus PaymentStatus @default(UNPAID)
  transactionId String?        @unique
  user   User   @relation(fields: [userId], references: [id])
  userId String 
  event   Event   @relation(fields: [eventId], references: [id])
  eventId String
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
}

model Review {
  id     String @id @default(uuid())
  rating Int
  comment String?

  reviewer   User   @relation("ReviewerRatings", fields: [reviewerId], references: [id])
  reviewerId String

  host   User   @relation("HostRatings", fields: [hostId], references: [id])
  hostId String

  event   Event  @relation(fields: [eventId], references: [id])
  eventId String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([reviewerId, eventId])
}

model EventParticipants {
  id String @id @default(uuid())

  event   Event  @relation(fields: [eventId], references: [id])
  eventId String

  user   User   @relation(fields: [userId], references: [id])
  userId String

  createdAt DateTime @default(now())

  @@unique([userId, eventId])
}

model SaveEvent {
  id String @id @default(uuid())

  event   Event  @relation(fields: [eventId], references: [id])
  eventId String

  user   User   @relation(fields: [userId], references: [id])
  userId String

  createdAt DateTime @default(now())

  @@unique([userId, eventId])
}
